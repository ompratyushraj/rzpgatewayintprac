<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Razorpay Payment Form</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/material-ui/4.11.0/styles.css"
    />
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <style>
      body {
        font-family: "Roboto", sans-serif;
        background-color: #333333; /* Dark background color */
        color: white; /* Light text for contrast */
        padding: 30px;
        margin: 0;
      }

      .form-container {
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
        background-color: #444444; /* Slightly lighter dark background for the form */
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      h1 {
        text-align: center;
        color: white;
        margin-bottom: 30px;
        font-size: 1.8rem;
      }

      /* Ensure .MuiTextField-root takes full width and margin */
      .MuiTextField-root {
        margin-bottom: 20px;
        width: 100%; /* Ensures the input container spans full width */
      }

      /* Input Fields */
      .MuiTextField-root input[type="text"],
      .MuiTextField-root input[type="email"],
      .MuiTextField-root input[type="tel"],
      .MuiTextField-root input[type="number"],
      .MuiTextField-root select {
        background-color: transparent;
        color: white;
        border: none; /* Make borders invisible */
        border-bottom: 4px solid #5469d4; /* Blue bottom border */
        padding: 10px;
        font-size: 16px;
        width: 100%; /* Ensure input fields stretch across full width */
        outline: none;
        box-sizing: border-box; /* Ensure padding is included in the width */
      }

      /* Focused Input Fields */
      .MuiTextField-root input[type="text"]:focus,
      .MuiTextField-root input[type="email"]:focus,
      .MuiTextField-root input[type="tel"]:focus,
      .MuiTextField-root input[type="number"]:focus,
      .MuiTextField-root select:focus {
        border-bottom: 4px solid #5469d4; /* Blue bottom border on focus */
      }

      select {
        background-color: transparent;
      }

      /* Style for the Category dropdown options */
      select option {
        color: black; /* Make the text inside options black */
        background-color: transparent; /* Keep background transparent */
      }

      /* Button */
      .MuiButton-root {
        background-color: #5469d4; /* Razorpay's blue color */
        color: white;
        width: 100%;
        padding: 12px;
        font-size: 16px;
        border: none; /* Remove border */
        border-radius: 30px; /* Rounded corners */
        cursor: pointer;
        margin-top: 20px;
      }

      .MuiButton-root:hover {
        background-color: #4051b5;
      }

      /* Media Queries for Responsiveness */
      @media (max-width: 768px) {
        h1 {
          font-size: 1.5rem; /* Slightly smaller heading on small screens */
        }

        .form-container {
          padding: 15px; /* Reduce padding for smaller screens */
          margin: 10px;
        }

        .MuiTextField-root input[type="text"],
        .MuiTextField-root input[type="email"],
        .MuiTextField-root input[type="tel"],
        .MuiTextField-root input[type="number"],
        .MuiTextField-root select {
          font-size: 14px; /* Reduce input font size */
        }

        .MuiButton-root {
          font-size: 14px; /* Reduce button font size */
          padding: 10px; /* Reduce button padding */
        }
      }

      @media (max-width: 480px) {
        .form-container {
          padding: 10px; /* Further reduce padding for very small screens */
          margin: 5px;
        }

        h1 {
          font-size: 1.2rem; /* Further reduce heading size */
        }

        .MuiButton-root {
          font-size: 12px; /* Reduce button font size even more */
          padding: 8px; /* Reduce button padding */
        }

        /* Adjust form fields on very small screens */
        .MuiTextField-root input[type="text"],
        .MuiTextField-root input[type="email"],
        .MuiTextField-root input[type="tel"],
        .MuiTextField-root input[type="number"],
        .MuiTextField-root select {
          font-size: 12px; /* Further reduce input font size */
          padding: 8px; /* Reduce input padding */
        }
      }
    </style>
  </head>
  <body>
    <div class="form-container">
      <h1>Razorpay Payment Gateway <br />Form</h1>
      <form id="paymentForm" onsubmit="event.preventDefault(); createOrder();">
        <div class="MuiTextField-root">
          <label for="name" style="color: white">Full Name</label>
          <input
            type="text"
            id="name"
            name="name"
            required
            placeholder="Enter your name"
          />
        </div>

        <div class="MuiTextField-root">
          <label for="contact" style="color: white">Contact Number</label>
          <input
            type="tel"
            id="contact"
            name="contact"
            required
            placeholder="Enter your contact number"
            pattern="^\d{10}$"
          />
        </div>

        <div class="MuiTextField-root">
          <label for="email" style="color: white">Email Address</label>
          <input
            type="email"
            id="email"
            name="email"
            required
            placeholder="Enter your email"
          />
        </div>

        <div class="MuiTextField-root">
          <label for="category" style="color: white">Select Medicine</label>
          <select id="category" name="category" required>
            <option value="" disabled selected>select a medicine</option>
            <option value="paracetamol">Paracetamol</option>
            <option value="amoxicillin">Amoxicillin</option>
            <option value="atorvastatin">Atorvastatin</option>
            <option value="metformin">Metformin</option>
            <option value="dextromethorphan">Dextromethorphan</option>
            <option value="omeprazole">Omeprazole</option>
            <option value="hydrocortisone_cream">Hydrocortisone Cream</option>
            <option value="neosporin">Neosporin</option>
            <option value="sterile_gauze">Sterile Gauze</option>
            <option value="influenza_vaccine">Influenza Vaccine</option>
            <option value="fluoride_toothpaste">Fluoride Toothpaste</option>
            <option value="artificial_tears">Artificial Tears</option>
          </select>
        </div>

        <div class="MuiTextField-root">
          <label for="amount" style="color: white">Amount</label>
          <input
            type="number"
            id="amount"
            name="amount"
            required
            min="1"
            placeholder="Enter amount"
          />
        </div>

        <button type="submit" id="rzp-button1" class="MuiButton-root">
          Initiate Payment
        </button>
      </form>
    </div>

    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script>
      async function createOrder() {
        console.log("--- Order Creation Started ---");
        const response = await fetch("http://localhost:8080/create-order", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            name: document.getElementById("name").value,
            email: document.getElementById("email").value,
            contact: document.getElementById("contact").value,
            category: document.getElementById("category").value,
            amount: document.getElementById("amount").value,
            currency: "INR",
          }),
        });

        const order = await response.json();
        console.log("--- Order creation completed ---");
        console.log(order);
        return order;
      }
      document.getElementById("rzp-button1").onclick = async function (e) {
        const order = await createOrder();
        console.log(order);

        var options = {
          key: "rzp_test_RMru0mzXZpVTq6", // Enter the Key ID generated from the Dashboard
          amount: order.amount, // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
          currency: "INR",
          name: "Pratyush Raj RZPPGIP", //your business name
          description: "Test Transaction1",
          image: "https://example.com/your_logo",
          order_id: order.razorpayOrderId, //This is a sample Order ID. Pass the `id` obtained in the response of Step 1
          receipt: order.email,
          callback_url: "http://localhost:8080/handle-payment-callback",
          prefill: {
            //We recommend using the prefill parameter to auto-fill customer's contact information especially their phone number
            name: order.name, //your customer's name
            email: order.email,
            contact: order.contact, //Provide the customer's phone number for better conversion rates
          },
          notes: {
            address: "Razorpay Corporate Office",
          },
          theme: {
            color: "#3399cc",
          },
        };
        var rzp1 = new Razorpay(options);
        document.getElementById("rzp-button1").onclick = function (e) {
          rzp1.open();
          e.preventDefault();
        };
      };
    </script>
  </body>
</html>
